import { __decorate, __metadata, __param } from "tslib";
import { of, Subject } from 'rxjs';
import { StrategyCacheService } from '../core/strategyCache';
import { StorageStrategies } from '../constants/strategy';
import { Inject, Injectable } from '@angular/core';
import * as ɵngcc0 from '@angular/core';
var InMemoryStorageStrategy = /** @class */ (function () {
    function InMemoryStorageStrategy(cache) {
        this.cache = cache;
        this.keyChanges = new Subject();
        this.isAvailable = true;
        this.name = InMemoryStorageStrategy_1.strategyName;
    }
    InMemoryStorageStrategy_1 = InMemoryStorageStrategy;
    InMemoryStorageStrategy.prototype.get = function (key) {
        return of(this.cache.get(this.name, key));
    };
    InMemoryStorageStrategy.prototype.set = function (key, value) {
        this.cache.set(this.name, key, value);
        this.keyChanges.next(key);
        return of(value);
    };
    InMemoryStorageStrategy.prototype.del = function (key) {
        this.cache.del(this.name, key);
        this.keyChanges.next(key);
        return of(null);
    };
    InMemoryStorageStrategy.prototype.clear = function () {
        this.cache.clear(this.name);
        this.keyChanges.next(null);
        return of(null);
    };
    var InMemoryStorageStrategy_1;
    InMemoryStorageStrategy.strategyName = StorageStrategies.InMemory;
    InMemoryStorageStrategy.ctorParameters = function () { return [
        { type: StrategyCacheService, decorators: [{ type: Inject, args: [StrategyCacheService,] }] }
    ]; };
    InMemoryStorageStrategy = InMemoryStorageStrategy_1 = __decorate([ __param(0, Inject(StrategyCacheService)),
        __metadata("design:paramtypes", [StrategyCacheService])
    ], InMemoryStorageStrategy);
InMemoryStorageStrategy.ɵfac = function InMemoryStorageStrategy_Factory(t) { return new (t || InMemoryStorageStrategy)(ɵngcc0.ɵɵinject(StrategyCacheService)); };
InMemoryStorageStrategy.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: InMemoryStorageStrategy, factory: function (t) { return InMemoryStorageStrategy.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(InMemoryStorageStrategy, [{
        type: Injectable
    }], function () { return [{ type: StrategyCacheService, decorators: [{
                type: Inject,
                args: [StrategyCacheService]
            }] }]; }, null); })();
    return InMemoryStorageStrategy;
}());
export { InMemoryStorageStrategy };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5NZW1vcnkuanMiLCJzb3VyY2VzIjpbIm5nOi9uZ3gtd2Vic3RvcmFnZS9saWIvc3RyYXRlZ2llcy9pbk1lbW9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0EsT0FBTyxFQUFhLEVBQUUsRUFBRSxPQUFPLEVBQUMsTUFBTSxNQUFNLENBQUM7QUFDN0MsT0FBTyxFQUFDLG9CQUFvQixFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFDM0QsT0FBTyxFQUFDLGlCQUFpQixFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFDeEQsT0FBTyxFQUFDLE1BQU0sRUFBRSxVQUFVLEVBQUMsTUFBTSxlQUFlLENBQUM7O0FBR2pEO0FBQTJELElBTTFELGlDQUFvRCxLQUEyQjtBQUFJLFFBQS9CLFVBQUssR0FBTCxLQUFLLENBQXNCO0FBQUMsUUFKdkUsZUFBVSxHQUFvQixJQUFJLE9BQU8sRUFBRSxDQUFDO0FBQ3RELFFBQUMsZ0JBQVcsR0FBWSxJQUFJLENBQUM7QUFDN0IsUUFBVSxTQUFJLEdBQVcseUJBQXVCLENBQUMsWUFBWSxDQUFDO0FBQzlELElBQ21GLENBQUM7QUFDcEYsZ0NBUGEsdUJBQXVCO0FBQUUsSUFRckMscUNBQUcsR0FBSCxVQUFJLEdBQVc7QUFBSSxRQUNsQixPQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDNUMsSUFBQyxDQUFDO0FBRUYsSUFBQyxxQ0FBRyxHQUFILFVBQUksR0FBVyxFQUFFLEtBQVU7QUFBSSxRQUM5QixJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUN4QyxRQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzVCLFFBQUUsT0FBTyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDbkIsSUFBQyxDQUFDO0FBRUYsSUFBQyxxQ0FBRyxHQUFILFVBQUksR0FBVztBQUFJLFFBQ2xCLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDakMsUUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUM1QixRQUFFLE9BQU8sRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2xCLElBQUMsQ0FBQztBQUVGLElBQUMsdUNBQUssR0FBTDtBQUFjLFFBQ2IsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzlCLFFBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDN0IsUUFBRSxPQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNsQixJQUFDLENBQUM7QUFFRjtBQUNpQyxJQTlCaEIsb0NBQVksR0FBVyxpQkFBaUIsQ0FBQyxRQUFRLENBQUM7QUFDbkU7QUFDYSxnQkFHK0Msb0JBQW9CLHVCQUFsRSxNQUFNLFNBQUMsb0JBQW9CO0FBQVE7QUFBVSxJQU45Qyx1QkFBdUIsb0RBRG5DLFVBQVUsRUFBRSxyQkFDTCxDQU1NLFdBQUEsTUFBTSxDQUFDLG9CQUFvQixDQUFDLENBQUE7QUFBRSx5Q0FBZ0Isb0JBQW9CO0FBQUcsT0FOdEUsdUJBQXVCLENBOEJuQzs7Ozs7Ozs7a0NBQ0Q7QUFBQyxJQURELDhCQUFDO0FBQ0EsQ0FEQSxBQTlCRCxJQThCQztBQUNELFNBL0JhLHVCQUF1QjtBQUFJIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtTdG9yYWdlU3RyYXRlZ3l9IGZyb20gJy4uL2NvcmUvaW50ZXJmYWNlcy9zdG9yYWdlU3RyYXRlZ3knO1xuaW1wb3J0IHtPYnNlcnZhYmxlLCBvZiwgU3ViamVjdH0gZnJvbSAncnhqcyc7XG5pbXBvcnQge1N0cmF0ZWd5Q2FjaGVTZXJ2aWNlfSBmcm9tICcuLi9jb3JlL3N0cmF0ZWd5Q2FjaGUnO1xuaW1wb3J0IHtTdG9yYWdlU3RyYXRlZ2llc30gZnJvbSAnLi4vY29uc3RhbnRzL3N0cmF0ZWd5JztcbmltcG9ydCB7SW5qZWN0LCBJbmplY3RhYmxlfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIEluTWVtb3J5U3RvcmFnZVN0cmF0ZWd5IGltcGxlbWVudHMgU3RvcmFnZVN0cmF0ZWd5PGFueT4ge1xuXHRzdGF0aWMgcmVhZG9ubHkgc3RyYXRlZ3lOYW1lOiBzdHJpbmcgPSBTdG9yYWdlU3RyYXRlZ2llcy5Jbk1lbW9yeTtcblx0cmVhZG9ubHkga2V5Q2hhbmdlczogU3ViamVjdDxzdHJpbmc+ID0gbmV3IFN1YmplY3QoKTtcblx0aXNBdmFpbGFibGU6IGJvb2xlYW4gPSB0cnVlO1xuXHRyZWFkb25seSBuYW1lOiBzdHJpbmcgPSBJbk1lbW9yeVN0b3JhZ2VTdHJhdGVneS5zdHJhdGVneU5hbWU7XG5cblx0Y29uc3RydWN0b3IoQEluamVjdChTdHJhdGVneUNhY2hlU2VydmljZSkgcHJvdGVjdGVkIGNhY2hlOiBTdHJhdGVneUNhY2hlU2VydmljZSkge31cblxuXHRnZXQoa2V5OiBzdHJpbmcpOiBPYnNlcnZhYmxlPGFueT4ge1xuXHRcdHJldHVybiBvZih0aGlzLmNhY2hlLmdldCh0aGlzLm5hbWUsIGtleSkpO1xuXHR9XG5cblx0c2V0KGtleTogc3RyaW5nLCB2YWx1ZTogYW55KTogT2JzZXJ2YWJsZTxhbnk+IHtcblx0XHR0aGlzLmNhY2hlLnNldCh0aGlzLm5hbWUsIGtleSwgdmFsdWUpO1xuXHRcdHRoaXMua2V5Q2hhbmdlcy5uZXh0KGtleSk7XG5cdFx0cmV0dXJuIG9mKHZhbHVlKTtcblx0fVxuXG5cdGRlbChrZXk6IHN0cmluZyk6IE9ic2VydmFibGU8dm9pZD4ge1xuXHRcdHRoaXMuY2FjaGUuZGVsKHRoaXMubmFtZSwga2V5KTtcblx0XHR0aGlzLmtleUNoYW5nZXMubmV4dChrZXkpO1xuXHRcdHJldHVybiBvZihudWxsKTtcblx0fVxuXG5cdGNsZWFyKCk6IE9ic2VydmFibGU8dm9pZD4ge1xuXHRcdHRoaXMuY2FjaGUuY2xlYXIodGhpcy5uYW1lKTtcblx0XHR0aGlzLmtleUNoYW5nZXMubmV4dChudWxsKTtcblx0XHRyZXR1cm4gb2YobnVsbCk7XG5cdH1cblxufVxuIl19